sp500Stock %>% group_by( symbol ) %>% tq_transmute(select = close, mutate_fun = periodReturn,
sp500Stock %>% group_by( symbol ) %>% tq_transmute(select = adjusted, mutate_fun = periodReturn, period = "daily", type='log' ) 
stockReturns <- stock %>% grtq_transmute(select = adjusted, mutate_fun = periodReturn, period = "daily", type='log' ) 

sp500Returns <- sp500Stock %>% tq_transmute(select = adjusted, mutate_fun = periodReturn, period = "daily", type='log', col_rename="AA.Returns" ) 

baseComparison <- left_join( stockReturns, sp500Returns, by = c("date" = "date") ) 

vLineDate <- rsiStock %>% filter( date >= startTime & date <= startTime+months(6) ) %>% select( date, rsi ) %>% filter( rsi == max(rsi) ) %>% select(date) %>% pull

vLineDate <- rsiStock %>% filter( date >= startTime & date <= startTime+months(6) ) %>% select( date, rsi ) %>% filter( rsi == max(rsi) ) %>% select(date) %>% pull

verticalLine <- geom_vline(  xintercept=( vLineDate ), alpha=0.5, linetype='dashed', color='black' ) 

ggarrange( g1+verticalLine, g2+verticalLine, ncol=1, nrow=2, align="v" )

industryProductionIndex <- tq_get( "INDPRO", get="economic.data" )
